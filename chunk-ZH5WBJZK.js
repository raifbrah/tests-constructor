import{a as j,aa as A,b as v,ba as B,e as q,i as M,k as U,n as k}from"./chunk-4EDE4VDA.js";import{b,m as W,o as z,p as L,t as R}from"./chunk-3LIPWXFZ.js";import{Gb as _,Jb as m,Kb as a,Qa as l,Ub as d,Wb as Q,Xb as f,Yb as y,Zb as T,a as O,ac as D,bc as I,da as x,eb as h,ja as c,ka as p,pa as E,rb as F,sb as C,tb as w,ub as V,vb as S,wb as g,xb as r,yb as s}from"./chunk-DE2S4UQ2.js";var X=(n,o,e)=>({"disabled-input-text":n,"right-answer":o,"wrong-answer":e});function Y(n,o){if(n&1){let e=_();r(0,"input",4),T("ngModelChange",function(i){c(e);let u=a(2);return y(u.answer.checked,i)||(u.answer.checked=i),p(i)}),m("change",function(){c(e);let i=a(2);return p(i.saveAnswer())}),s()}if(n&2){let e=a(2);f("ngModel",e.answer.checked),g("disabled",e.testType==="watch")}}function Z(n,o){if(n&1){let e=_();r(0,"input",5),T("ngModelChange",function(i){c(e);let u=a(2);return y(u.question.group_answer,i)||(u.question.group_answer=i),p(i)}),m("change",function(){c(e);let i=a(2);return p(i.saveAnswer())}),s()}if(n&2){let e=a(2);f("ngModel",e.question.group_answer),g("value",e.answer.id)("disabled",e.testType==="watch"),F("name",e.question.id)}}function $(n,o){if(n&1&&C(0,Y,1,2,"input",2)(1,Z,1,4,"input",3),n&2){let e=a();w(e.question.type==="multiple"?0:1)}}function ee(n,o){if(n&1){let e=_();r(0,"button",6),m("click",function(){c(e);let i=a();return p(i.answer.correct=!i.answer.correct)}),d(1),s(),r(2,"button",7),m("click",function(){c(e);let i=a();return p(i.onRemoveAnswer())}),d(3," \u0423\u0434\u0430\u043B\u0438\u0442\u044C "),s()}if(n&2){let e=a();l(),Q(" \u041F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u044B\u0439: ",e.answer.correct," ")}}var P=class n{answer;testType;question;removeAnswer=new E;testsService=x(B);onRemoveAnswer(){this.removeAnswer.emit()}saveAnswer(){this.testsService.save()}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=h({type:n,selectors:[["app-answer"]],inputs:{answer:"answer",testType:"testType",question:"question"},outputs:{removeAnswer:"removeAnswer"},decls:4,vars:9,consts:[[1,"answer"],["type","text","placeholder","\u0412\u0430\u0440\u0438\u0430\u043D\u0442 \u043E\u0442\u0432\u0435\u0442\u0430",1,"answer__input",3,"ngModelChange","ngModel","disabled","ngClass"],["type","checkbox",1,"answer__checkbox",3,"ngModel","disabled"],["type","radio",1,"answer__checkbox",3,"ngModel","value","disabled"],["type","checkbox",1,"answer__checkbox",3,"ngModelChange","change","ngModel","disabled"],["type","radio",1,"answer__checkbox",3,"ngModelChange","change","ngModel","value","disabled"],["tuiButton","","size","s","appearance","secondary","type","button",3,"click"],["tuiButton","","size","s","appearance","primary","type","button",3,"click"]],template:function(e,t){e&1&&(r(0,"div",0),C(1,$,2,1),r(2,"input",1),T("ngModelChange",function(u){return y(t.answer.value,u)||(t.answer.value=u),u}),s(),C(3,ee,4,1),s()),e&2&&(l(),w(t.testType==="passing"||t.testType==="watch"?1:-1),l(),f("ngModel",t.answer.value),g("disabled",t.testType==="passing"||t.testType==="watch")("ngClass",I(5,X,t.testType==="passing"||t.testType==="watch",t.testType==="watch"&&t.answer.correct,t.testType==="watch"&&!t.answer.correct)),l(),w(t.testType!=="passing"&&t.testType!=="watch"?3:-1))},dependencies:[k,v,j,U,q,M,A,b],styles:[".answer[_ngcontent-%COMP%]{display:flex;gap:.5rem;align-items:center}.answer__input[_ngcontent-%COMP%]{font-size:1rem;border-radius:.5rem;border:1px solid #e5e7eb;padding:.35rem .6rem;background:#fff;color:#111827}.right-answer[_ngcontent-%COMP%]{color:green!important}.wrong-answer[_ngcontent-%COMP%]{color:red!important}"]})};var te=n=>({"disabled-input-text":n}),ne=(n,o)=>o.id;function ie(n,o){n&1&&d(0," \u041E\u0434\u0438\u043D \u0432\u0430\u0440\u0438\u0430\u043D\u0442 \u043E\u0442\u0432\u0435\u0442\u0430 ")}function oe(n,o){n&1&&d(0," \u041D\u0435\u0441\u043A\u043E\u043B\u044C\u043A\u043E \u0432\u0430\u0440\u0438\u0430\u043D\u0442\u043E\u0432 ")}function se(n,o){if(n&1){let e=_();r(0,"button",10),m("click",function(){c(e);let i=a();return p(i.changeQuestionType())}),C(1,ie,1,0)(2,oe,1,0),s()}if(n&2){let e=a();l(),w(e.question.type==="single"?1:e.question.type==="multiple"?2:-1)}}function re(n,o){if(n&1){let e=_();r(0,"app-answer",11),m("removeAnswer",function(){let i=c(e).$implicit,u=a();return p(u.removeAnswer(i.id))}),s()}if(n&2){let e=o.$implicit,t=a();g("testType",t.testType)("answer",e)("question",t.question)}}function ae(n,o){if(n&1){let e=_();r(0,"div",9)(1,"button",12),m("click",function(){c(e);let i=a();return p(i.addNewAnswer())}),d(2," + \u0434\u043E\u0431\u0430\u0432\u0438\u0442\u044C "),s(),r(3,"button",13),m("click",function(){c(e);let i=a();return p(i.onRemoveQuestion())}),d(4," \u0423\u0434\u0430\u043B\u0438\u0442\u044C \u043A\u0430\u0440\u0442\u043E\u0447\u043A\u0443 "),s()()}}var N=class n{question;questionIndex;testType;removeQuestion=new E;onRemoveQuestion(){this.removeQuestion.emit()}removeAnswer(o){this.question.answers=this.question.answers.filter(e=>e.id!==o)}addNewAnswer(){this.question.answers=[...this.question.answers,{id:Date.now(),value:"",correct:!1,checked:!1}]}changeQuestionType(){this.question.type=this.question.type==="multiple"?"single":"multiple",this.question.answers.map(o=>o.checked=!1)}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=h({type:n,selectors:[["app-question"]],inputs:{question:"question",questionIndex:"questionIndex",testType:"testType"},outputs:{removeQuestion:"removeQuestion"},decls:12,vars:8,consts:[[1,"question-card"],[1,"card__header"],[1,"card__title"],[1,"question__input-number"],["type","text","placeholder","\u041E\u043F\u0438\u0441\u0430\u043D\u0438\u0435 \u0432\u043E\u043F\u0440\u043E\u0441\u0430",1,"question__input",3,"ngModelChange","ngModel","disabled","ngClass"],["tuiButton","","size","s","appearance","flat"],[1,"card__content"],[1,"questions"],[3,"testType","answer","question"],[1,"card-actions"],["tuiButton","","size","s","appearance","flat",3,"click"],[3,"removeAnswer","testType","answer","question"],["tuiButton","","size","s","appearance","secondary",1,"task__add-option-btn",3,"click"],["tuiButton","","size","s","appearance","primary",1,"error-button",3,"click"]],template:function(e,t){e&1&&(r(0,"article",0)(1,"header",1)(2,"div",2)(3,"div",3),d(4),s(),r(5,"input",4),T("ngModelChange",function(u){return y(t.question.description,u)||(t.question.description=u),u}),s()(),C(6,se,3,1,"button",5),s(),r(7,"section",6)(8,"div",7),V(9,re,1,3,"app-answer",8,ne),s(),C(11,ae,5,0,"div",9),s()()),e&2&&(l(4),Q("",t.questionIndex+1,"."),l(),f("ngModel",t.question.description),g("disabled",t.testType==="passing"||t.testType==="watch")("ngClass",D(6,te,t.testType==="passing"||t.testType==="watch")),l(),w(t.testType!=="passing"&&t.testType!=="watch"?6:-1),l(3),S(t.question.answers),l(2),w(t.testType!=="passing"&&t.testType!=="watch"?11:-1))},dependencies:[A,P,k,v,q,M,b],styles:[".question-card[_ngcontent-%COMP%]{border-radius:.75rem;border:1px solid #e5e7eb;background:#fff;padding:1.25rem 1.5rem;box-shadow:0 6px 18px #0f172a0a}.card__header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between}.card__title[_ngcontent-%COMP%]{display:flex;align-items:center}.card-actions[_ngcontent-%COMP%]{display:flex;justify-content:space-between;gap:1rem}.questions[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem;margin:1rem 0}.question__input-number[_ngcontent-%COMP%]{font-size:1.4rem}.question__input[_ngcontent-%COMP%]{font-size:1.4rem;border:1px solid #e5e7eb;border-radius:.5rem;padding:.35rem .6rem;background:#fff;color:#111827}"]})};var ue=n=>({"disabled-input-text":n}),ce=(n,o)=>o.id;function pe(n,o){if(n&1){let e=_();r(0,"app-question",8),m("removeQuestion",function(){let i=c(e).$implicit,u=a();return p(u.removeQuestion(i.id))}),s()}if(n&2){let e=o.$implicit,t=o.$index,i=a();g("question",e)("questionIndex",t)("testType",i.testType)}}function le(n,o){if(n&1){let e=_();r(0,"button",9),m("click",function(){c(e);let i=a();return p(i.addNewQuestion())}),d(1," \u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u0432\u043E\u043F\u0440\u043E\u0441 "),s()}}function de(n,o){if(n&1){let e=_();r(0,"a",10),d(1,"\u0412\u044B\u0439\u0442\u0438"),s(),r(2,"button",11),m("click",function(){c(e);let i=a();return p(i.completeTest())}),d(3," \u0417\u0430\u0432\u0435\u0440\u0448\u0438\u0442\u044C "),s()}}function me(n,o){n&1&&(r(0,"a",7),d(1,"\u0412\u044B\u0439\u0442\u0438"),s())}function _e(n,o){if(n&1){let e=_();r(0,"a",10),d(1,"\u041E\u0442\u043C\u0435\u043D\u0438\u0442\u044C"),s(),r(2,"button",11),m("click",function(){c(e);let i=a();return p(i.saveTest())}),d(3," \u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C "),s()}}var K=class n{testType="create";test;authService=x(R);testsService=x(B);route=x(W);router=x(z);constructor(){this.route.queryParams.subscribe(o=>{let e=o.type;if(e&&(this.testType=e),e!=="create"){let t=Number(o.id),i=this.testsService.testsList.find(u=>u.id===t);i&&(this.test=O({},i))}else this.test={id:Date.now(),name:"",author_id:this.authService.currentUser().id,created_at:Date.now(),questions:[]}})}addNewQuestion(){this.test.questions=[...this.test.questions,{id:Date.now(),description:"",type:"multiple",group_answer:null,order:3,theUserAnsweredCorrectly:!1,answers:[]}]}removeQuestion(o){this.test.questions=this.test.questions.filter(e=>e.id!==o)}saveTest(){this.testsService.createNewTest(this.test),this.router.navigate([""])}completeTest(){this.testsService.completeTest(O({},this.test)),this.router.navigate(["passed-tests"])}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=h({type:n,selectors:[["app-test"]],decls:11,vars:7,consts:[[1,"test-title-wrapper"],["type","text","placeholder","\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435 \u0442\u0435\u0441\u0442\u0430",1,"test-title",3,"ngModelChange","ngModel","disabled","ngClass"],[1,"test-container"],[1,"test-container__questions-list"],[3,"question","questionIndex","testType"],["tuiButton","","size","s","appearance","primary",1,"add-card-btn"],[1,"test-container__actions"],["tuiButton","","appearance","secondary","routerLink","/passed-tests"],[3,"removeQuestion","question","questionIndex","testType"],["tuiButton","","size","s","appearance","primary",1,"add-card-btn",3,"click"],["tuiButton","","appearance","secondary","routerLink",""],["tuiButton","","appearance","primary",3,"click"]],template:function(e,t){e&1&&(r(0,"div",0)(1,"input",1),T("ngModelChange",function(u){return y(t.test.name,u)||(t.test.name=u),u}),s()(),r(2,"div",2)(3,"div",3),V(4,pe,1,3,"app-question",4,ce),C(6,le,2,0,"button",5),s(),r(7,"div",6),C(8,de,4,0)(9,me,2,0,"a",7)(10,_e,4,0),s()()),e&2&&(l(),f("ngModel",t.test.name),g("disabled",t.testType==="passing"||t.testType==="watch")("ngClass",D(5,ue,t.testType==="passing"||t.testType==="watch")),l(3),S(t.test.questions),l(2),w(t.testType!=="passing"&&t.testType!=="watch"?6:-1),l(2),w(t.testType==="passing"?8:t.testType==="watch"?9:10))},dependencies:[A,k,v,q,M,N,L,b],styles:[".test-title-wrapper[_ngcontent-%COMP%]{display:flex;width:100%;justify-content:center}.test-title[_ngcontent-%COMP%]{text-align:center;margin-bottom:2rem;width:min-content;font-size:2rem;font-weight:700}.test-container[_ngcontent-%COMP%]{gap:2rem;display:flex;flex-direction:column;border:1px solid #e5e7eb;max-width:min(800px,100%);margin:0 auto;padding:2rem min(4rem,5%);border-radius:1rem;background:#fff;box-shadow:0 10px 30px #0f172a0f}.test-container__questions-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.test-container__actions[_ngcontent-%COMP%]{gap:.5rem;display:flex;margin:0 auto;width:min-content}.add-card-btn[_ngcontent-%COMP%]{width:min-content;margin:0 auto}"]})};export{K as TestComponent};
