import{aa as O,ba as D}from"./chunk-4EDE4VDA.js";import{g as M,m as P,o as w,p as k,s as F,t as B}from"./chunk-3LIPWXFZ.js";import{$b as b,Gb as f,Jb as C,Kb as r,Qa as u,Ub as s,Vb as d,cc as y,da as p,eb as v,ec as h,ja as m,ka as _,sb as T,tb as x,ub as g,vb as E,wb as S,xb as i,yb as o}from"./chunk-DE2S4UQ2.js";var $=()=>["test"],A=()=>({type:"create"}),I=(t,e)=>e.id;function q(t,e){t&1&&(i(0,"h2"),s(1,"\u041F\u0440\u043E\u0439\u0434\u0435\u043D\u043D\u044B\u0435 \u0442\u0435\u0441\u0442\u044B"),o())}function L(t,e){t&1&&(i(0,"h2"),s(1,"\u041C\u043E\u0438 \u0442\u0435\u0441\u0442\u044B"),o(),i(2,"a",2),s(3," \u0421\u043E\u0437\u0434\u0430\u0442\u044C "),o()),t&2&&(u(2),S("routerLink",b(2,$))("queryParams",b(3,A)))}function z(t,e){t&1&&(i(0,"th"),s(1,"\u0414\u0430\u0442\u0430 \u0441\u043E\u0437\u0434\u0430\u043D\u0438\u044F"),o(),i(2,"th"),s(3,"\u041A\u043E\u043B-\u0432\u043E \u0443\u0447\u0430\u0441\u0442\u043D\u0438\u043A\u043E\u0432"),o())}function R(t,e){t&1&&(i(0,"th"),s(1,"\u0414\u0430\u0442\u0430 \u043F\u0440\u043E\u0445\u043E\u0436\u0434\u0435\u043D\u0438\u044F"),o(),i(2,"th"),s(3,"\u0420\u0435\u0437\u0443\u043B\u044C\u0442\u0430\u0442"),o())}function j(t,e){if(t&1&&(i(0,"td"),s(1),y(2,"date"),o(),i(3,"td"),s(4),o()),t&2){let n=r().$implicit;u(),d(h(2,2,n.created_at,"dd.MM.yyyy")),u(3),d(n.participants_count)}}function N(t,e){if(t&1&&(i(0,"td"),s(1),y(2,"date"),o(),i(3,"td"),s(4),o()),t&2){let n=r().$implicit;u(),d(h(2,2,n.passed_at,"dd.MM.yyyy")),u(3),d(n.result)}}function U(t,e){if(t&1){let n=f();i(0,"button",5),C("click",function(){m(n);let l=r().$implicit,c=r();return _(c.watchTest(l))}),s(1," \u041E\u0442\u043A\u0440\u044B\u0442\u044C "),o()}}function G(t,e){if(t&1){let n=f();i(0,"button",6),C("click",function(){m(n);let l=r().$implicit,c=r();return _(c.openTest(l))}),s(1," \u041E\u0442\u043A\u0440\u044B\u0442\u044C "),o(),i(2,"button",6),C("click",function(){m(n);let l=r().$implicit,c=r();return _(c.editTest(l))}),s(3," \u0420\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u043E\u0432\u0430\u0442\u044C "),o(),i(4,"button",5),C("click",function(){m(n);let l=r().$implicit,c=r();return _(c.deleteTest(l))}),s(5," \u0423\u0434\u0430\u043B\u0438\u0442\u044C "),o()}}function H(t,e){if(t&1&&(i(0,"tr")(1,"td"),s(2),o(),T(3,j,5,5)(4,N,5,5),i(5,"td",3),T(6,U,2,0,"button",4)(7,G,6,0),o()()),t&2){let n=e.$implicit,a=r();u(2),d(n.name),u(),x(a.testsType!=="passed-tests"?3:4),u(3),x(a.testsType==="passed-tests"?6:7)}}var V=class t{testsType="";authService=p(B);testsService=p(D);route=p(P);router=p(w);getTests(e){return e!=="completed"?this.testsService.testsList.filter(n=>n.author_id===this.authService.currentUser().id):this.testsService.completedTestsList.filter(n=>n.author_id===this.authService.currentUser().id)}ngOnInit(){this.testsType=this.route.snapshot.url.at(-1)?.path??""}editTest(e){this.router.navigate(["/test"],{queryParams:{id:e.id,type:"edit"}})}deleteTest(e){this.testsService.deleteTest(e.id)}openTest(e){this.router.navigate(["/test"],{queryParams:{id:e.id,type:"passing"}})}watchTest(e){this.router.navigate(["/test"],{queryParams:{id:e.id,type:"watch"}})}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=v({type:t,selectors:[["tests-table"]],decls:15,vars:2,consts:[[1,"tests-header"],[1,"tests-table"],["tuiButton","","appearance","primary",3,"routerLink","queryParams"],[1,"tests-table__actions"],["tuiButton","","size","s","appearance","primary"],["tuiButton","","size","s","appearance","primary",3,"click"],["tuiButton","","size","s","appearance","secondary",3,"click"]],template:function(n,a){n&1&&(i(0,"div",0),T(1,q,2,0,"h2")(2,L,4,4),o(),i(3,"table",1)(4,"thead")(5,"tr")(6,"th"),s(7,"\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435"),o(),T(8,z,4,0)(9,R,4,0),i(10,"th"),s(11,"\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u044F"),o()()(),i(12,"tbody"),g(13,H,8,3,"tr",null,I),o()()),n&2&&(u(),x(a.testsType==="passed-tests"?1:2),u(7),x(a.testsType!=="passed-tests"?8:9),u(5),E(a.testsType==="passed-tests"?a.getTests("completed"):a.getTests()))},dependencies:[O,F,k,M],styles:[".tests-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between}.tests-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;margin-top:20px;background:#fff;border-radius:12px;overflow:hidden;box-shadow:0 10px 30px #0f172a0f}.tests-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{background:#f3f4f6}.tests-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .tests-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px 16px;text-align:left;font-size:14px}.tests-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background:#f9fafb}.tests-table__actions[_ngcontent-%COMP%]{display:flex;gap:8px}"]})};export{V as a};
